<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      li {
        list-style: none;
      }
      li > span {
        background: url("./images/add.png") no-repeat center left;
        padding-left: 1.2em;
        cursor: pointer;
      }
      li > ul {
        display: none;
      }
      /* 自定义 开启 */
      .open {
        background-image: url("./images/minus.png");
      }
      .open + ul {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- ul.tree>(li>span+ul>li*3)*3 -->
    <ul class="tree">
      <li>
        <span class="open">考勤管理</span>
        <ul>
          <li>日常考勤</li>
          <li>请假申请</li>
          <li>加班/出差</li>
        </ul>
      </li>
      <li>
        <span>信息中心</span>
        <ul>
          <li>通知公告</li>
          <li>公司新闻</li>
          <li>规章制度</li>
        </ul>
      </li>
      <li>
        <span>协同办公</span>
        <ul>
          <li>公文流转</li>
          <li>文件中心</li>
          <li>内部邮件</li>
          <li>即时通信</li>
          <li>短信提醒</li>
        </ul>
      </li>
    </ul>

    <script>
      let spans = document.querySelectorAll(".tree span")
      console.log(spans)

      spans.forEach(item => {
        // 添加点击事件
        item.onclick = function () {
          //手风琴效果
          // 点击已展开,直接关闭
          if (this.className == "open") {
            this.className == ""
            return
          }
          // 点击未展开,关闭其它展开的,然后展开
          if (this.className == "") {
            // 查找已开启的
            let span_open = document.querySelector(".open")
            if (span_open != null) span_open.className = ""
            // 开启自身
            this.className = "open"
          }
        }
      })
    </script>
  </body>
</html>
