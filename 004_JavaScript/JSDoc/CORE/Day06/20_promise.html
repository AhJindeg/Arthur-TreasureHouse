<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function checkUname() {
        return new Promise((resolve, reject) => {
          Math.random() > 0.3
            ? resolve("用户名可用！")
            : reject("用户名不可用！")
        })
      }

      function checkPhone() {
        return new Promise((resolve, reject) => {
          Math.random() > 0.3
            ? resolve("手机号可用！")
            : reject("手机号不可用！")
        })
      }

      function checkEmail() {
        return new Promise((resolve, reject) => {
          Math.random() > 0.3 ? resolve("邮箱可用！") : reject("邮箱不可用！")
        })
      }

      function doRegister() {
        return new Promise((resolve, reject) => {
          Math.random() > 0.3 ? resolve("注册成功！") : reject("注册失败！")
        })
      }

      // 检测用户名 -> 检测手机号 -> 检测邮箱 -> 注册
      // checkUname()
      //   .then(result => {
      //     console.log(result)
      //     // then中返回promise对象，触发下一个then
      //     return checkPhone()
      //   })
      //   .then(result => {
      //     console.log(result)
      //     return checkEmail()
      //   })
      //   .then(result => {
      //     console.log(result)
      //     return doRegister()
      //   })
      //   .then(result => {
      //     console.log(result)
      //   })
      //   .catch(err => console.log("#", err))

      checkUname()
        .then(result => checkPhone())
        .then(result => checkEmail())
        .then(result => doRegister())
        .then(result => console.log(result))
        .catch(err => console.log(err))
        
    </script>
  </body>
</html>
